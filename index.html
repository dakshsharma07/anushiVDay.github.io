<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Valentine?</title>
    <style>
      :root {
        color-scheme: light;
        font-family: "Trebuchet MS", "Segoe UI", sans-serif;
      }

      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        background: radial-gradient(circle at top, #ffe5ec, #fff);
        color: #2d2035;
      }

      .card {
        width: min(90vw, 560px);
        padding: 32px;
        border-radius: 24px;
        background: #ffffffcc;
        box-shadow: 0 20px 50px rgba(45, 32, 53, 0.15);
        text-align: center;
      }

      h1 {
        margin: 0 0 20px;
        font-size: clamp(1.8rem, 4vw, 2.4rem);
      }

      .note {
        margin: 12px 0 0;
        font-size: 0.95rem;
        color: #7a5a7f;
      }

      .buttons {
        position: relative;
        margin-top: 28px;
        height: 140px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 16px;
        overflow: hidden;
      }

      button {
        border: none;
        border-radius: 999px;
        padding: 12px 28px;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 10px 20px rgba(45, 32, 53, 0.15);
      }

      button:focus-visible {
        outline: 3px solid #ffb3c1;
        outline-offset: 4px;
      }

      #yes-btn {
        position: absolute;
        background: #ff4d6d;
        color: #fff;
        font-size: 1.15rem;
        padding: 16px 36px;
        --yes-scale: 1;
        transform: scale(var(--yes-scale));
      }

      #no-btn {
        position: absolute;
        background: #f3f3f5;
        color: #2d2035;
        padding: 12px 24px;
        left: 0;
        top: 0;
      }

      #yay-screen {
        position: fixed;
        inset: 0;
        display: grid;
        place-items: center;
        text-align: center;
        background: transparent;
        gap: 18px;
      }

      #yay-screen h1 {
        margin: 0;
        font-size: clamp(3.5rem, 10vw, 6.5rem);
        letter-spacing: 3px;
        color: #ff4d6d;
        text-shadow: 0 12px 24px rgba(255, 77, 109, 0.35);
      }

      #next-btn {
        background: #4d9cff;
        color: #fff;
        padding: 12px 32px;
      }

      #feed-screen {
        position: fixed;
        inset: 0;
        background: #fafafa;
        display: grid;
        grid-template-rows: auto 1fr auto;
        gap: 16px;
        padding: 24px 18px 30px;
        overflow: hidden;
      }

      .feed-header {
        display: flex;
        align-items: center;
        width: min(94vw, 460px);
        margin: 0 auto;
        font-size: 1.2rem;
        color: #111;
        letter-spacing: 0.3px;
        font-weight: 700;
        font-family: "Segoe UI", "Arial", sans-serif;
      }

      .feed-title {
        flex: 1;
        display: grid;
        gap: 2px;
      }

      .feed-subtitle {
        font-size: 0.85rem;
        color: #777;
        font-weight: 500;
      }

      .feed-next {
        margin-left: auto;
        background: #ff4d6d;
        color: #fff;
        border: none;
        border-radius: 999px;
        padding: 8px 18px;
        font-size: 0.95rem;
        cursor: pointer;
        box-shadow: 0 10px 20px rgba(255, 77, 109, 0.2);
      }

      .feed-container {
        width: min(94vw, 460px);
        margin: 0 auto;
        overflow-y: auto;
        scroll-snap-type: y mandatory;
        padding: 8px 0 40px;
        scrollbar-width: none;
      }

      .feed-container::-webkit-scrollbar {
        width: 0;
        height: 0;
      }

      .feed-item {
        scroll-snap-align: center;
        background: #fff;
        border-radius: 18px;
        border: 1px solid #ececec;
        box-shadow: 0 10px 28px rgba(45, 32, 53, 0.08);
        margin: 18px 0 28px;
        overflow: hidden;
        text-align: left;
      }

      .post-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 14px;
      }

      .post-user {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 0.95rem;
        font-weight: 600;
        color: #121212;
        font-family: "Segoe UI", "Arial", sans-serif;
      }

      .avatar {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        background: linear-gradient(135deg, #ff4d6d, #ffb3c1);
        display: grid;
        place-items: center;
        color: #fff;
        font-size: 0.85rem;
        font-weight: 700;
      }

      .post-menu {
        color: #666;
        font-size: 1.2rem;
        letter-spacing: 2px;
      }

      .feed-item img {
        width: 100%;
        aspect-ratio: 4 / 5;
        height: auto;
        object-fit: cover;
        display: block;
      }

      .post-actions {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 14px 2px;
      }

      .action-btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border: none;
        background: transparent;
        color: #222;
        font-size: 0.9rem;
        cursor: pointer;
        padding: 6px 8px;
        border-radius: 10px;
      }

      .action-btn svg {
        width: 18px;
        height: 18px;
        stroke: #222;
        fill: none;
        stroke-width: 1.6;
      }

      .action-btn:focus-visible {
        outline: 2px solid #ffb3c1;
        outline-offset: 3px;
      }

      .caption {
        padding: 10px 16px 18px;
        font-size: 1rem;
        line-height: 1.5;
        color: #3a2a42;
      }

      .caption-username {
        font-weight: 700;
        color: #111;
        margin-right: 6px;
        font-family: "Segoe UI", "Arial", sans-serif;
      }

      .caption-date {
        display: block;
        margin-top: 6px;
        font-size: 0.85rem;
        color: #7a7a7a;
      }

      #extra-screen {
        position: fixed;
        inset: 0;
        background: #fafafa;
        display: grid;
        grid-template-rows: auto 1fr;
        gap: 16px;
        padding: 24px 18px 30px;
        overflow-y: auto;
      }

      .story-shell {
        width: min(94vw, 460px);
        margin: 0 auto;
        height: auto;
        display: grid;
        grid-template-rows: auto 1fr auto;
        gap: 12px;
      }

      .story-card {
        position: relative;
        border-radius: 18px;
        overflow: hidden;
        background: #000;
        border: 1px solid #ececec;
        box-shadow: 0 10px 28px rgba(45, 32, 53, 0.08);
        min-height: 460px;
        display: grid;
        cursor: pointer;
      }

      .story-card--text {
        background: linear-gradient(160deg, #1a1a1a, #3a3a3a);
        place-items: center;
        padding: 28px;
      }

      .story-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .story-top {
        position: absolute;
        inset: 10px 12px auto 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        color: #fff;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.45);
        font-size: 0.95rem;
        font-weight: 600;
      }

      .story-progress {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: rgba(255, 255, 255, 0.35);
      }

      .story-progress::after {
        content: "";
        display: block;
        height: 100%;
        width: 100%;
        background: #fff;
        opacity: 0.9;
        transform-origin: left;
        animation: story-timer 6s linear infinite;
      }

      .story-hint {
        text-align: center;
        font-size: 0.9rem;
        color: #777;
        letter-spacing: 0.2px;
      }

      .story-actions {
        position: absolute;
        left: 12px;
        right: 12px;
        bottom: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .story-reply {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(0, 0, 0, 0.65);
        border: 1px solid #ffffffcc;
        border-radius: 999px;
        padding: 8px 12px;
        font-size: 0.95rem;
        color: #fff;
      }

      .story-input {
        flex: 1;
        border: none;
        background: transparent;
        color: #fff;
        font-size: 0.95rem;
        outline: none;
        padding: 6px 8px;
        font-family: inherit;
      }

      .story-input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .story-send {
        border: none;
        background: transparent;
        color: #fff;
        font-weight: 600;
        cursor: pointer;
        padding: 6px 8px;
      }

      .story-text {
        color: #fff;
        text-align: center;
        font-size: clamp(1.1rem, 3vw, 1.4rem);
        line-height: 1.6;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
      }

      .dm-screen {
        position: fixed;
        inset: 0;
        background: #fafafa;
        display: grid;
        grid-template-rows: auto 1fr auto auto;
        padding: 24px 18px 30px;
        gap: 12px;
      }

      .dm-header {
        width: min(94vw, 460px);
        margin: 0 auto;
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Segoe UI", "Arial", sans-serif;
        font-weight: 700;
        color: #111;
      }

      .dm-thread {
        width: min(94vw, 460px);
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
        overflow-y: auto;
        padding: 6px 0 12px;
      }

      .dm-bubble {
        align-self: flex-end;
        background: #4d9cff;
        color: #fff;
        padding: 10px 14px;
        border-radius: 18px 18px 6px 18px;
        max-width: 85%;
        font-size: 0.98rem;
        line-height: 1.45;
        box-shadow: 0 8px 18px rgba(77, 156, 255, 0.25);
      }

      .dm-typing {
        align-self: flex-end;
        background: #e9f1ff;
        color: #4d9cff;
        padding: 8px 12px;
        border-radius: 16px 16px 6px 16px;
        display: inline-flex;
        gap: 4px;
        font-weight: 700;
        letter-spacing: 2px;
      }

      .dm-typing span {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #4d9cff;
        opacity: 0.4;
        animation: typing-bounce 1s infinite;
      }

      .dm-typing span:nth-child(2) {
        animation-delay: 0.2s;
      }

      .dm-typing span:nth-child(3) {
        animation-delay: 0.4s;
      }

      .dm-input {
        width: min(94vw, 460px);
        margin: 0 auto;
        display: flex;
        align-items: center;
        gap: 10px;
        border: 1px solid #e5e5e5;
        border-radius: 999px;
        padding: 10px 14px;
        color: #888;
        font-size: 0.95rem;
      }

      .dm-next {
        width: min(94vw, 460px);
        margin: 0 auto;
        background: #4d9cff;
        color: #fff;
        border: none;
        border-radius: 999px;
        padding: 12px 28px;
        font-size: 1rem;
        cursor: pointer;
        box-shadow: 0 12px 24px rgba(77, 156, 255, 0.25);
      }

      .final-screen {
        position: fixed;
        inset: 0;
        display: grid;
        place-items: center;
        padding: 24px;
        background: #f5f5f7;
      }

      .ig-notification {
        width: min(96vw, 520px);
        background: #1c1c1e;
        color: #fff;
        border-radius: 18px;
        padding: 16px 18px;
        display: flex;
        align-items: flex-start;
        gap: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
      }

      .ig-logo {
        width: 30px;
        height: 30px;
        border-radius: 8px;
        background: linear-gradient(135deg, #f58529, #dd2a7b, #8134af, #515bd4);
        display: grid;
        place-items: center;
        flex-shrink: 0;
      }

      .ig-logo svg {
        width: 18px;
        height: 18px;
        fill: #fff;
      }

      .ig-meta {
        display: grid;
        gap: 6px;
      }

      .ig-title {
        font-size: 0.85rem;
        letter-spacing: 0.3px;
        color: rgba(255, 255, 255, 0.7);
        text-transform: uppercase;
      }

      .ig-text {
        font-size: 1rem;
        line-height: 1.5;
      }

      .ig-time {
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.55);
      }

      @keyframes typing-bounce {
        0%,
        80%,
        100% {
          transform: translateY(0);
          opacity: 0.4;
        }
        40% {
          transform: translateY(-4px);
          opacity: 1;
        }
      }

      @keyframes story-timer {
        from {
          transform: scaleX(0);
        }
        to {
          transform: scaleX(1);
        }
      }

      .celebration {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
      }

      .confetti {
        position: absolute;
        width: 12px;
        height: 18px;
        border-radius: 4px;
        animation: fall 2.2s linear infinite;
        opacity: 0.9;
      }

      .confetti.c1 {
        left: 10%;
        background: #ff4d6d;
        animation-delay: 0s;
      }
      .confetti.c2 {
        left: 22%;
        background: #ffb703;
        animation-delay: 0.3s;
      }
      .confetti.c3 {
        left: 35%;
        background: #4d9cff;
        animation-delay: 0.5s;
      }
      .confetti.c4 {
        left: 47%;
        background: #7b2cbf;
        animation-delay: 0.2s;
      }
      .confetti.c5 {
        left: 60%;
        background: #ff8fab;
        animation-delay: 0.4s;
      }
      .confetti.c6 {
        left: 72%;
        background: #00b4d8;
        animation-delay: 0.1s;
      }
      .confetti.c7 {
        left: 84%;
        background: #06d6a0;
        animation-delay: 0.6s;
      }
      .confetti.c8 {
        left: 92%;
        background: #f72585;
        animation-delay: 0.25s;
      }

      @keyframes fall {
        0% {
          transform: translateY(-120px) rotate(0deg);
        }
        100% {
          transform: translateY(120vh) rotate(260deg);
        }
      }

      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div class="card" id="question-screen">
      <h1>Anushi, will you be my valentine?</h1>
      <!-- catch the no if you can -->
      <div class="buttons" id="button-area">
        <button id="yes-btn">Yes</button>
        <button id="no-btn">No</button>
      </div>
      <p class="note">catch the no if you can</p>
    </div>

    <div class="hidden" id="yay-screen" aria-hidden="true">
      <div class="celebration" aria-hidden="true">
        <span class="confetti c1"></span>
        <span class="confetti c2"></span>
        <span class="confetti c3"></span>
        <span class="confetti c4"></span>
        <span class="confetti c5"></span>
        <span class="confetti c6"></span>
        <span class="confetti c7"></span>
        <span class="confetti c8"></span>
      </div>
      <h1>YAYY!</h1>
      <button id="next-btn">Next</button>
    </div>

    <div class="hidden" id="feed-screen" aria-hidden="true">
      <div class="feed-header">
        <div class="feed-title">
          <span>Feed</span>
          <span class="feed-subtitle">Ducky &amp; Mushy timeline</span>
        </div>
        <button id="feed-next-btn" class="feed-next" type="button">Next</button>
      </div>
      <div class="feed-container" id="feed-container">
        <div class="feed-item" data-weight="1.1">
          <div class="post-header">
            <div class="post-user">
              <span class="avatar">D&amp;M</span>
              <span>Ducky &amp; Mushy</span>
            </div>
            <span class="post-menu">···</span>
          </div>
          <img src="IMG_1995.JPG" alt="Memory 1" />
          <div class="post-actions">
            <button class="action-btn" type="button" aria-label="Like">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 20s-7-4.35-7-9a4 4 0 0 1 7-2.5A4 4 0 0 1 19 11c0 4.65-7 9-7 9z"
                />
              </svg>
              Like
            </button>
            <button class="action-btn" type="button" aria-label="Comment">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16v10H7l-3 4z" />
              </svg>
              Comment
            </button>
            <button class="action-btn" type="button" aria-label="Share">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 12h10M10 6l6 6-6 6" />
              </svg>
              Share
            </button>
          </div>
          <div class="caption">
            <span class="caption-username">Ducky &amp; Mushy</span>
            These past few months have been the best of my entire life.
            <span class="caption-date">Dec 2025</span>
          </div>
        </div>
        <div class="feed-item" data-weight="1.3">
          <div class="post-header">
            <div class="post-user">
              <span class="avatar">D&amp;M</span>
              <span>Ducky &amp; Mushy</span>
            </div>
            <span class="post-menu">···</span>
          </div>
          <img src="IMG_1998.JPG" alt="Memory 4" />
          <div class="post-actions">
            <button class="action-btn" type="button" aria-label="Like">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 20s-7-4.35-7-9a4 4 0 0 1 7-2.5A4 4 0 0 1 19 11c0 4.65-7 9-7 9z"
                />
              </svg>
              Like
            </button>
            <button class="action-btn" type="button" aria-label="Comment">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16v10H7l-3 4z" />
              </svg>
              Comment
            </button>
            <button class="action-btn" type="button" aria-label="Share">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 12h10M10 6l6 6-6 6" />
              </svg>
              Share
            </button>
          </div>
          <div class="caption">
            <span class="caption-username">Ducky &amp; Mushy</span>
            We might have oceans apart, but our bond is so much stronger than
            any distance in the galaxy.
            <span class="caption-date">Nov 2025</span>
          </div>
        </div>
        <div class="feed-item" data-weight="1.05">
          <div class="post-header">
            <div class="post-user">
              <span class="avatar">D&amp;M</span>
              <span>Ducky &amp; Mushy</span>
            </div>
            <span class="post-menu">···</span>
          </div>
          <img src="IMG_1996.JPG" alt="Memory 2" />
          <div class="post-actions">
            <button class="action-btn" type="button" aria-label="Like">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 20s-7-4.35-7-9a4 4 0 0 1 7-2.5A4 4 0 0 1 19 11c0 4.65-7 9-7 9z"
                />
              </svg>
              Like
            </button>
            <button class="action-btn" type="button" aria-label="Comment">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16v10H7l-3 4z" />
              </svg>
              Comment
            </button>
            <button class="action-btn" type="button" aria-label="Share">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 12h10M10 6l6 6-6 6" />
              </svg>
              Share
            </button>
          </div>
          <div class="caption">
            <span class="caption-username">Ducky &amp; Mushy</span>
            You're the greatest thing to ever happen to me.
            <span class="caption-date">Nov 2025</span>
          </div>
        </div>
        <div class="feed-item" data-weight="1.5">
          <div class="post-header">
            <div class="post-user">
              <span class="avatar">D&amp;M</span>
              <span>Ducky &amp; Mushy</span>
            </div>
            <span class="post-menu">···</span>
          </div>
          <img src="IMG_1999.JPG" alt="Memory 5" />
          <div class="post-actions">
            <button class="action-btn" type="button" aria-label="Like">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 20s-7-4.35-7-9a4 4 0 0 1 7-2.5A4 4 0 0 1 19 11c0 4.65-7 9-7 9z"
                />
              </svg>
              Like
            </button>
            <button class="action-btn" type="button" aria-label="Comment">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16v10H7l-3 4z" />
              </svg>
              Comment
            </button>
            <button class="action-btn" type="button" aria-label="Share">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 12h10M10 6l6 6-6 6" />
              </svg>
              Share
            </button>
          </div>
          <div class="caption">
            <span class="caption-username">Ducky &amp; Mushy</span>
            I am forever grateful you are my valentine. I love you.
            <span class="caption-date">Oct 2025</span>
          </div>
        </div>
        <div class="feed-item" data-weight="1.2">
          <div class="post-header">
            <div class="post-user">
              <span class="avatar">D&amp;M</span>
              <span>Ducky &amp; Mushy</span>
            </div>
            <span class="post-menu">···</span>
          </div>
          <img src="IMG_2001.JPG" alt="Memory 6" />
          <div class="post-actions">
            <button class="action-btn" type="button" aria-label="Like">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 20s-7-4.35-7-9a4 4 0 0 1 7-2.5A4 4 0 0 1 19 11c0 4.65-7 9-7 9z"
                />
              </svg>
              Like
            </button>
            <button class="action-btn" type="button" aria-label="Comment">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16v10H7l-3 4z" />
              </svg>
              Comment
            </button>
            <button class="action-btn" type="button" aria-label="Share">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 12h10M10 6l6 6-6 6" />
              </svg>
              Share
            </button>
          </div>
          <div class="caption">
            <span class="caption-username">Ducky &amp; Mushy</span>
            You're so smart, beautiful, empathetic, and funny. Most of all, you
            get me, and I get you.
            <span class="caption-date">Sep 2025</span>
          </div>
        </div>
        <div class="feed-item" data-weight="1.4">
          <div class="post-header">
            <div class="post-user">
              <span class="avatar">D&amp;M</span>
              <span>Ducky &amp; Mushy</span>
            </div>
            <span class="post-menu">···</span>
          </div>
          <img src="IMG_1997.JPG" alt="Memory 3" />
          <div class="post-actions">
            <button class="action-btn" type="button" aria-label="Like">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 20s-7-4.35-7-9a4 4 0 0 1 7-2.5A4 4 0 0 1 19 11c0 4.65-7 9-7 9z"
                />
              </svg>
              Like
            </button>
            <button class="action-btn" type="button" aria-label="Comment">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16v10H7l-3 4z" />
              </svg>
              Comment
            </button>
            <button class="action-btn" type="button" aria-label="Share">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 12h10M10 6l6 6-6 6" />
              </svg>
              Share
            </button>
          </div>
          <div class="caption">
            <span class="caption-username">Ducky &amp; Mushy</span>
            I knew I loved you from the start.
            <span class="caption-date">Aug 2025</span>
          </div>
        </div>
      </div>
    </div>

    <div class="hidden" id="extra-screen" aria-hidden="true">
      <div class="feed-header">
        <div class="feed-title">
          <span>Feed</span>
          <span class="feed-subtitle">Ducky &amp; Mushy</span>
        </div>
      </div>
      <div class="story-shell">
        <div class="story-card" aria-label="Instagram story">
          <div class="story-progress" aria-hidden="true"></div>
          <div class="story-top">
            <div class="post-user">
              <span class="avatar">D&amp;M</span>
              <span>Ducky &amp; Mushy</span>
            </div>
            <span>Story</span>
          </div>
          <img class="story-image" src="IMG_2002.JPG" alt="Memory 7" />
          <div class="story-actions">
            <div class="story-reply">
              <input
                class="story-input"
                type="text"
                value="Will never forget the weather in Mumbai."
                readonly
              />
              <button class="story-send" type="button">Send</button>
            </div>
          </div>
        </div>
        <div class="story-hint">Tap the story to advance</div>
      </div>
    </div>

    <div class="hidden" id="final-screen" aria-hidden="true">
      <div class="final-screen">
        <div class="ig-notification" role="status" aria-live="polite">
          <div class="ig-logo" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path
                d="M12 7.3a4.7 4.7 0 1 0 0 9.4 4.7 4.7 0 0 0 0-9.4Zm0 7.6a2.9 2.9 0 1 1 0-5.8 2.9 2.9 0 0 1 0 5.8Zm5.7-7.7a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2ZM7.3 2.8h9.4A4.9 4.9 0 0 1 21.6 7.7v9.4a4.9 4.9 0 0 1-4.9 4.9H7.3a4.9 4.9 0 0 1-4.9-4.9V7.7a4.9 4.9 0 0 1 4.9-4.9Zm0 1.9A3 3 0 0 0 4.3 7.7v9.4a3 3 0 0 0 3 3h9.4a3 3 0 0 0 3-3V7.7a3 3 0 0 0-3-3H7.3Z"
              />
            </svg>
          </div>
          <div class="ig-meta">
            <div class="ig-title">Instagram</div>
            <div class="ig-text">
              You thought this was it? I didn't talk to Nia for nothing. Stay
              tuned for a little something extra for Valentine's day.
            </div>
            <div class="ig-time">now</div>
          </div>
        </div>
      </div>
    </div>

    <div class="hidden dm-screen" id="dm-screen" aria-hidden="true">
      <div class="dm-header">
        <span class="avatar">D&amp;M</span>
        <span>Ducky &amp; Mushy</span>
      </div>
      <div class="dm-thread" id="dm-thread">
        <div class="dm-typing" id="dm-typing">
          <span></span><span></span><span></span>
        </div>
      </div>
      <button class="dm-next hidden" id="dm-next-btn" type="button">Next</button>
      <div class="dm-input">Message…</div>
    </div>

    <script>
      const noButton = document.getElementById("no-btn");
      const yesButton = document.getElementById("yes-btn");
      const nextButton = document.getElementById("next-btn");
      const questionScreen = document.getElementById("question-screen");
      const yayScreen = document.getElementById("yay-screen");
      const feedScreen = document.getElementById("feed-screen");
      const extraScreen = document.getElementById("extra-screen");
      const finalScreen = document.getElementById("final-screen");
      const dmScreen = document.getElementById("dm-screen");
      const feedContainer = document.getElementById("feed-container");
      const feedNextButton = document.getElementById("feed-next-btn");
      const dmThread = document.getElementById("dm-thread");
      const dmTyping = document.getElementById("dm-typing");
      const dmNextButton = document.getElementById("dm-next-btn");
      const buttonArea = document.getElementById("button-area");
      let yesScale = 1;
      const maxYesScale = 1.6;
      const yesScaleStep = 0.08;
      let lastNoPosition = { x: 0, y: 0 };
      let lastMoveAt = 0;
      const moveCooldownMs = 280;

      const rectsOverlap = (a, b) =>
        a.left < b.right &&
        a.right > b.left &&
        a.top < b.bottom &&
        a.bottom > b.top;

      const getYesBox = (areaRect) => {
        const yesRect = yesButton.getBoundingClientRect();
        return {
          left: yesRect.left - areaRect.left,
          right: yesRect.right - areaRect.left,
          top: yesRect.top - areaRect.top,
          bottom: yesRect.bottom - areaRect.top,
        };
      };

      const positionNoButton = (x, y) => {
        noButton.style.transform = `translate(${x}px, ${y}px)`;
        lastNoPosition = { x, y };
      };

      const bumpYesSize = () => {
        if (yesScale >= maxYesScale) {
          return;
        }
        yesScale = Math.min(maxYesScale, yesScale + yesScaleStep);
        yesButton.style.setProperty("--yes-scale", yesScale);
      };

      const findNonOverlappingSpot = (areaRect, yesBox) => {
        const buttonWidth = noButton.offsetWidth;
        const buttonHeight = noButton.offsetHeight;
        const maxX = Math.max(0, areaRect.width - buttonWidth);
        const maxY = Math.max(0, areaRect.height - buttonHeight);
        const maxAttempts = 30;

        for (let i = 0; i < maxAttempts; i += 1) {
          const x = Math.random() * maxX;
          const y = Math.random() * maxY;
          const noBox = {
            left: x,
            right: x + buttonWidth,
            top: y,
            bottom: y + buttonHeight,
          };
          if (!rectsOverlap(noBox, yesBox)) {
            return { x, y };
          }
        }

        return { x: 0, y: maxY };
      };

      const moveNoButton = (event) => {
        const now = Date.now();
        if (now - lastMoveAt < moveCooldownMs) {
          return;
        }

        const areaRect = buttonArea.getBoundingClientRect();
        const yesBox = getYesBox(areaRect);
        const cursorX = event.clientX - areaRect.left;
        const cursorY = event.clientY - areaRect.top;

        const noRect = noButton.getBoundingClientRect();
        const noCenterX = noRect.left - areaRect.left + noRect.width / 2;
        const noCenterY = noRect.top - areaRect.top + noRect.height / 2;
        const distanceToNo = Math.hypot(noCenterX - cursorX, noCenterY - cursorY);
        const triggerDistance = Math.max(noRect.width, noRect.height) + 20;

        if (distanceToNo > triggerDistance) {
          return;
        }

        const spot = findNonOverlappingSpot(areaRect, yesBox);
        const dx = spot.x - cursorX;
        const dy = spot.y - cursorY;

        let target = spot;
        if (Math.hypot(dx, dy) < 60) {
          target = findNonOverlappingSpot(areaRect, yesBox);
        }

        const moveDistance = Math.hypot(
          target.x - lastNoPosition.x,
          target.y - lastNoPosition.y
        );

        if (moveDistance > 1) {
          lastMoveAt = now;
          positionNoButton(target.x, target.y);
          bumpYesSize();
        }
      };

      const setInitialPosition = () => {
        const areaRect = buttonArea.getBoundingClientRect();
        const gap = 16;
        const yesWidth = yesButton.offsetWidth;
        const yesHeight = yesButton.offsetHeight;
        const noWidth = noButton.offsetWidth;
        const noHeight = noButton.offsetHeight;
        const maxX = Math.max(0, areaRect.width - noWidth);
        const maxY = Math.max(0, areaRect.height - noHeight);

        let totalWidth = yesWidth + gap + noWidth;
        let adjustedGap = gap;
        if (totalWidth > areaRect.width) {
          adjustedGap = Math.max(8, areaRect.width - yesWidth - noWidth);
          totalWidth = yesWidth + adjustedGap + noWidth;
        }

        let yesX = Math.max(0, (areaRect.width - totalWidth) / 2);
        let yesY = Math.max(0, (areaRect.height - yesHeight) / 2);
        let noX = yesX + yesWidth + adjustedGap;
        let noY = Math.max(0, (areaRect.height - noHeight) / 2);

        if (noX > areaRect.width - noWidth) {
          noX = Math.max(0, yesX - adjustedGap - noWidth);
        }

        yesButton.style.left = `${Math.min(
          Math.max(0, yesX),
          areaRect.width - yesWidth
        )}px`;
        yesButton.style.top = `${Math.min(
          Math.max(0, yesY),
          areaRect.height - yesHeight
        )}px`;

        const yesBox = getYesBox(areaRect);
        const buttonWidth = noButton.offsetWidth;
        const buttonHeight = noButton.offsetHeight;
        let x = Math.min(Math.max(0, noX), maxX);
        let y = Math.min(Math.max(0, noY), maxY);

        const noBox = {
          left: x,
          right: x + buttonWidth,
          top: y,
          bottom: y + buttonHeight,
        };

        if (rectsOverlap(noBox, yesBox)) {
          const safeSpot = findNonOverlappingSpot(areaRect, yesBox);
          positionNoButton(safeSpot.x, safeSpot.y);
          return;
        }

        positionNoButton(x, y);
      };

      window.addEventListener("load", setInitialPosition);
      window.addEventListener("resize", setInitialPosition);
      requestAnimationFrame(setInitialPosition);
      buttonArea.addEventListener("mousemove", moveNoButton);
      buttonArea.addEventListener("touchmove", (event) => {
        if (event.touches && event.touches[0]) {
          moveNoButton(event.touches[0]);
        }
      });

      yesButton.addEventListener("click", () => {
        questionScreen.classList.add("hidden");
        yayScreen.classList.remove("hidden");
        yayScreen.setAttribute("aria-hidden", "false");
      });

      const prefersReducedMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      ).matches;

      const easeInOut = (t) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t);

      const animateScroll = (container, to, duration) =>
        new Promise((resolve) => {
          const start = container.scrollTop;
          const change = to - start;
          const startTime = performance.now();

          const step = (now) => {
            const elapsed = now - startTime;
            const progress = Math.min(1, elapsed / duration);
            container.scrollTop = start + change * easeInOut(progress);
            if (progress < 1) {
              requestAnimationFrame(step);
            } else {
              resolve();
            }
          };

          requestAnimationFrame(step);
        });

      let autoScrollActive = false;
      let userInterrupted = false;

      const startWeightedFeedScroll = async () => {
        if (prefersReducedMotion || autoScrollActive) {
          return;
        }

        autoScrollActive = true;
        userInterrupted = false;
        const items = Array.from(feedContainer.querySelectorAll(".feed-item"));

        for (let index = 0; index < items.length; index += 1) {
          if (userInterrupted) {
            break;
          }
          const item = items[index];
          const weight = Number(item.dataset.weight || 1);
          const targetTop =
            item.offsetTop - (feedContainer.clientHeight - item.offsetHeight) / 2;

          const scrollDuration = 700 + 350 * weight;
          const dwell = 1400 + 700 * weight;
          await animateScroll(feedContainer, targetTop, scrollDuration);

          if (userInterrupted) {
            break;
          }
          await new Promise((resolve) => setTimeout(resolve, dwell));
        }

        autoScrollActive = false;
      };

      feedContainer.addEventListener("wheel", () => {
        userInterrupted = true;
      });
      feedContainer.addEventListener("touchstart", () => {
        userInterrupted = true;
      });

      nextButton.addEventListener("click", () => {
        yayScreen.classList.add("hidden");
        yayScreen.setAttribute("aria-hidden", "true");
        feedScreen.classList.remove("hidden");
        feedScreen.setAttribute("aria-hidden", "false");
        feedContainer.scrollTop = 0;
        startWeightedFeedScroll();
      });

      feedNextButton.addEventListener("click", () => {
        feedScreen.classList.add("hidden");
        feedScreen.setAttribute("aria-hidden", "true");
        extraScreen.classList.remove("hidden");
        extraScreen.setAttribute("aria-hidden", "false");
      });

      const storyCard = extraScreen.querySelector(".story-card");
      if (storyCard) {
        storyCard.addEventListener("click", () => {
          extraScreen.classList.add("hidden");
          extraScreen.setAttribute("aria-hidden", "true");
          dmScreen.classList.remove("hidden");
          dmScreen.setAttribute("aria-hidden", "false");
          showDmSequence();
        });
      }

      const finalStoryCard = finalScreen.querySelector(".story-card");
      const dmMessages = [
        "I knew I would love you from the day I sent the first text",
        "From Stone mountain adventures to you coming to seattle, being with you is so fun.",
        "everything about us just feels right",
        "i know everythings gonna work out and we'll be in NYC together",
        "i love you so much",
      ];

      const showDmSequence = () => {
        if (!dmThread || !dmTyping) {
          return;
        }
        dmThread.innerHTML = "";
        dmThread.appendChild(dmTyping);
        dmTyping.classList.remove("hidden");
        if (dmNextButton) {
          dmNextButton.classList.add("hidden");
        }

        let index = 0;
        const lastIndex = dmMessages.length - 1;
        const showNext = () => {
          if (index > lastIndex) {
            return;
          }

          dmTyping.classList.remove("hidden");
          setTimeout(() => {
            const bubble = document.createElement("div");
            bubble.className = "dm-bubble";
            bubble.textContent = dmMessages[index];
            dmThread.insertBefore(bubble, dmTyping);
            dmThread.scrollTop = dmThread.scrollHeight;
            if (index === lastIndex) {
              dmTyping.classList.add("hidden");
              if (dmNextButton) {
                dmNextButton.classList.remove("hidden");
              }
              return;
            }
            index += 1;
            setTimeout(showNext, 3000);
          }, 900);
        };

        showNext();
      };

      if (finalStoryCard) {
        finalStoryCard.addEventListener("click", () => {
          finalScreen.classList.add("hidden");
          finalScreen.setAttribute("aria-hidden", "true");
          dmScreen.classList.remove("hidden");
          dmScreen.setAttribute("aria-hidden", "false");
          showDmSequence();
        });
      }

      if (dmNextButton) {
        dmNextButton.addEventListener("click", () => {
          dmScreen.classList.add("hidden");
          dmScreen.setAttribute("aria-hidden", "true");
          finalScreen.classList.remove("hidden");
          finalScreen.setAttribute("aria-hidden", "false");
        });
      }
    </script>
  </body>
</html>
